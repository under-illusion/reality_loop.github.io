<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AIè§†è§‰æœºæ¢°è‡‚æ§åˆ¶ç³»ç»Ÿ</title>
  
  <!-- å¤–éƒ¨ä¾èµ– -->
  <script src="https://unpkg.com/event-source-polyfill@1.0.20/eventsource.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      height: 100vh;
      overflow: hidden;
    }

    .app-container {
      display: flex;
      height: 100vh;
      position: relative;
    }

    /* ä¸»èŠå¤©åŒºåŸŸ */
    .main-chat {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
    }

    /* é¡¶éƒ¨æ ‡é¢˜æ  */
    .chat-header {
      padding: 20px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(255, 255, 255, 0.95);
    }

    .chat-title h1 {
      font-size: 24px;
      color: #2c3e50;
      margin-bottom: 4px;
    }

    .chat-subtitle {
      color: #7f8c8d;
      font-size: 14px;
    }

    .header-actions {
      display: flex;
      gap: 10px;
    }

    .icon-btn {
      background: rgba(0, 0, 0, 0.1);
      border: none;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .icon-btn:hover {
      background: rgba(0, 0, 0, 0.2);
      transform: translateY(-1px);
    }

    .icon-btn.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    /* èŠå¤©æ¶ˆæ¯åŒºåŸŸ */
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      scroll-behavior: smooth;
    }

    .welcome-message {
      text-align: center;
      padding: 40px 20px;
      color: #7f8c8d;
    }

    .welcome-content h2 {
      color: #2c3e50;
      margin-bottom: 20px;
    }

    .welcome-content ul {
      text-align: left;
      max-width: 400px;
      margin: 20px auto;
    }

    .welcome-content li {
      margin-bottom: 10px;
    }

    /* æ¶ˆæ¯æ ·å¼ */
    .message {
      margin-bottom: 20px;
    }

    .message.user {
      text-align: right;
    }

    .message-content {
      display: inline-block;
      max-width: 80%;
      padding: 12px 16px;
      border-radius: 18px;
      word-wrap: break-word;
    }

    .message.user .message-content {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .message.assistant .message-content {
      background: rgba(0, 0, 0, 0.05);
      color: #2c3e50;
    }

    /* AIæ€è€ƒè¿‡ç¨‹ï¼ˆåƒChatGPTæ ·å¼ï¼‰ */
    .thinking-section {
      margin: 16px 0;
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      overflow: hidden;
      background: rgba(248, 249, 250, 0.8);
    }

    .thinking-header {
      padding: 12px 16px;
      background: rgba(0, 0, 0, 0.02);
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      user-select: none;
      transition: background 0.2s ease;
    }

    .thinking-header:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .thinking-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #666;
    }

    .thinking-toggle {
      width: 16px;
      height: 16px;
      transition: transform 0.2s ease;
    }

    .thinking-toggle.expanded {
      transform: rotate(180deg);
    }

    .thinking-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
      padding: 0 16px;
    }

    .thinking-content.expanded {
      max-height: 500px;
      padding: 16px;
    }

    .thinking-text {
      font-size: 13px;
      line-height: 1.5;
      color: #555;
      font-family: 'Monaco', 'Consolas', monospace;
      white-space: pre-wrap;
    }

    /* è¯­éŸ³å”¤é†’çŠ¶æ€ */
    .voice-wake-indicator {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(46, 213, 115, 0.9);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      display: none;
      z-index: 1000;
      animation: pulse 1s infinite;
    }

    .voice-wake-indicator.active {
      display: block;
    }

    /* è§†è§‰ç³»ç»Ÿä¾§è¾¹é¢æ¿ */
    .vision-panel {
      width: 0;
      height: 100vh;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-left: 1px solid rgba(0, 0, 0, 0.1);
      transition: width 0.3s ease;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: -5px 0 20px rgba(0, 0, 0, 0.1);
    }

    .vision-panel.open {
      width: 40%;
    }

    .vision-header {
      padding: 20px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(255, 255, 255, 0.9);
    }

    .vision-title {
      font-size: 18px;
      font-weight: 600;
      color: #2c3e50;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .close-vision-btn {
      background: rgba(0, 0, 0, 0.1);
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .close-vision-btn:hover {
      background: rgba(0, 0, 0, 0.2);
      transform: scale(1.1);
    }

    .vision-body {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    .camera-container {
      margin-bottom: 20px;
    }

    .camera-view, .detection-view {
      position: relative;
      margin-bottom: 15px;
      border-radius: 12px;
      overflow: hidden;
      background: rgba(0, 0, 0, 0.05);
      aspect-ratio: 16/9;
    }

    .camera-view img, .detection-view img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .camera-overlay, .detection-overlay {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
    }

    .vision-controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 20px;
    }

    .control-btn {
      padding: 12px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .control-btn.primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .control-btn.secondary {
      background: rgba(0, 0, 0, 0.1);
      color: #2c3e50;
    }

    .control-btn:hover {
      transform: translateY(-1px);
    }

    .objects-list {
      background: rgba(0, 0, 0, 0.02);
      border-radius: 8px;
      padding: 15px;
      min-height: 100px;
    }

    .empty-state {
      text-align: center;
      color: #7f8c8d;
      font-style: italic;
    }

    /* è§†è§‰é¢æ¿åˆ‡æ¢æŒ‰é’® */
    .vision-toggle-btn {
      position: fixed;
      top: 50%;
      right: 20px;
      transform: translateY(-50%);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }

    .vision-toggle-btn:hover {
      transform: translateY(-50%) scale(1.1);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    .vision-toggle-btn.panel-open {
      right: 420px;
    }

    /* æ‰§è¡Œç¡®è®¤åŒºåŸŸ */
    .execution-panel {
      padding: 15px 20px;
      background: rgba(255, 193, 7, 0.1);
      border-top: 1px solid rgba(255, 193, 7, 0.3);
      border-bottom: 1px solid rgba(255, 193, 7, 0.3);
    }

    .execution-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }

    .execution-actions {
      display: flex;
      gap: 10px;
    }

    .exec-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .exec-btn.confirm {
      background: #28a745;
      color: white;
    }

    .exec-btn.cancel {
      background: #dc3545;
      color: white;
    }

    .exec-btn:hover {
      transform: translateY(-1px);
    }

    /* åº•éƒ¨è¾“å…¥åŒºåŸŸ */
    .chat-input-area {
      padding: 20px;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      background: rgba(255, 255, 255, 0.95);
    }

    .input-mode-tabs {
      display: flex;
      gap: 5px;
      margin-bottom: 15px;
      align-items: center;
    }

    .mode-tab {
      padding: 8px 16px;
      border: 1px solid rgba(0, 0, 0, 0.2);
      background: white;
      border-radius: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .mode-tab.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: transparent;
    }

    .mode-tab:hover:not(.active) {
      background: rgba(0, 0, 0, 0.05);
    }

    /* è¯­éŸ³è®¾ç½® */
    .voice-settings {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-left: auto;
    }

    .setting-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .setting-label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      color: #666;
    }

    .toggle-switch {
      position: relative;
      width: 44px;
      height: 24px;
      background: #ddd;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .toggle-switch.active {
      background: #667eea;
    }

    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: transform 0.3s ease;
    }

    .toggle-switch.active::after {
      transform: translateX(20px);
    }

    .input-wrapper {
      display: flex;
      gap: 10px;
      align-items: flex-end;
      position: relative;
    }

    #message_input {
      flex: 1;
      padding: 12px 50px 12px 16px;
      border: 1px solid rgba(0, 0, 0, 0.2);
      border-radius: 20px;
      resize: none;
      font-family: inherit;
      font-size: 14px;
      max-height: 120px;
      min-height: 44px;
    }

    #message_input:focus {
      outline: none;
      border-color: #667eea;
    }

    .voice-btn {
      position: absolute;
      right: 60px;
      bottom: 6px;
      background: none;
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      color: #7f8c8d;
    }

    .voice-btn:hover {
      background: rgba(0, 0, 0, 0.1);
      color: #2c3e50;
    }

    .voice-btn.recording {
      background: #ff4757;
      color: white;
      animation: pulse 1s infinite;
    }

    .voice-btn.listening {
      background: #2ed573;
      color: white;
      animation: pulse 1s infinite;
    }

    .send-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .send-btn:hover {
      transform: scale(1.05);
    }

    .send-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* éŸ³é¢‘æ§åˆ¶ */
    .audio-status {
      position: absolute;
      bottom: -25px;
      left: 0;
      font-size: 12px;
      color: #7f8c8d;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .audio-status.visible {
      opacity: 1;
    }

    /* é€šçŸ¥æ ·å¼ */
    #notifications {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }

    .notification {
      background: rgba(255, 255, 255, 0.95);
      border-left: 4px solid #667eea;
      padding: 15px 20px;
      border-radius: 8px;
      margin-bottom: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      animation: slideIn 0.3s ease;
    }

    .notification.success {
      border-left-color: #2ed573;
    }

    .notification.warning {
      border-left-color: #ff9f43;
    }

    .notification.error {
      border-left-color: #ff4757;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .vision-panel.open {
        width: 100vw;
        position: fixed;
        top: 0;
        right: 0;
        z-index: 100;
      }

      .vision-toggle-btn.panel-open {
        right: 20px;
      }

      .voice-settings {
        flex-direction: column;
        gap: 10px;
        margin-left: 0;
      }

      .input-mode-tabs {
        flex-wrap: wrap;
      }
    }

    /* åŠ è½½åŠ¨ç”» */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(0, 0, 0, 0.1);
      border-radius: 50%;
      border-top-color: #667eea;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- è¯­éŸ³å”¤é†’æŒ‡ç¤ºå™¨ -->
    <div class="voice-wake-indicator" id="voice_wake_indicator">
      ğŸ¤ è¯­éŸ³å”¤é†’æ¿€æ´»ä¸­...
    </div>

    <!-- ä¸»èŠå¤©åŒºåŸŸ -->
    <main class="main-chat">
      <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
      <header class="chat-header">
        <div class="chat-title">
          <h1>ğŸ¤– AIè§†è§‰æœºæ¢°è‡‚åŠ©æ‰‹</h1>
          <div class="chat-subtitle" id="system_status">æ­£åœ¨è¿æ¥...</div>
        </div>
        <div class="header-actions">
          <button class="icon-btn" onclick="toggleVisionPanel()" title="è§†è§‰ç³»ç»Ÿ">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
        </div>
      </header>

      <!-- èŠå¤©æ¶ˆæ¯åŒºåŸŸ -->
      <div class="chat-messages" id="chat_messages">
        <div class="welcome-message">
          <div class="welcome-content">
            <h2>ğŸ‘‹ æ¬¢è¿ä½¿ç”¨AIè§†è§‰æœºæ¢°è‡‚æ§åˆ¶ç³»ç»Ÿ</h2>
            <p>æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸æˆ‘äº¤æµï¼š</p>
            <ul>
              <li>ğŸ’¬ <strong>æ–‡æœ¬è¾“å…¥</strong>ï¼šç›´æ¥è¾“å…¥æŒ‡ä»¤</li>
              <li>ğŸ¤ <strong>è¯­éŸ³è¾“å…¥</strong>ï¼šç‚¹å‡»éº¦å…‹é£æŒ‰é’®å½•éŸ³æˆ–å¼€å¯è¯­éŸ³å”¤é†’</li>
              <li>ğŸ‘ï¸ <strong>è§†è§‰åˆ†æ</strong>ï¼šåŸºäºæ‘„åƒå¤´ç”»é¢è¿›è¡Œåˆ†æ</li>
            </ul>
            <p>ä¾‹å¦‚ï¼š<code>"è¯·å¸®æˆ‘æŠ“å–æ¡Œä¸Šçš„çº¢è‰²è‹¹æœ"</code></p>
          </div>
        </div>
      </div>

      <!-- æ‰§è¡Œç¡®è®¤åŒºåŸŸ -->
      <div class="execution-panel" id="execution_panel" style="display: none;">
        <div class="execution-content">
          <div class="execution-info" id="execution_info"></div>
          <div class="execution-actions">
            <button class="exec-btn confirm" onclick="confirmExecution()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4"/>
                <path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"/>
              </svg>
              æ‰§è¡ŒåŠ¨ä½œ
            </button>
            <button class="exec-btn cancel" onclick="cancelExecution()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
              å–æ¶ˆ
            </button>
          </div>
        </div>
      </div>

      <!-- åº•éƒ¨è¾“å…¥åŒºåŸŸ -->
      <footer class="chat-input-area">
        <!-- è¾“å…¥æ¨¡å¼é€‰æ‹©å’Œè¯­éŸ³è®¾ç½® -->
        <div class="input-mode-tabs">
          <button class="mode-tab active" data-mode="text" onclick="switchInputMode('text')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14,2 14,8 20,8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10,9 9,9 8,9"/>
            </svg>
            æ–‡æœ¬
          </button>
          <button class="mode-tab" data-mode="voice" onclick="switchInputMode('voice')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
              <line x1="12" y1="19" x2="12" y2="23"/>
              <line x1="8" y1="23" x2="16" y2="23"/>
            </svg>
            è¯­éŸ³
          </button>
          
          <!-- è¯­éŸ³è®¾ç½® -->
          <div class="voice-settings">
            <div class="setting-item">
              <div class="setting-label">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                  <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                  <line x1="12" y1="19" x2="12" y2="23"/>
                  <line x1="8" y1="23" x2="16" y2="23"/>
                </svg>
                <span>è¯­éŸ³å”¤é†’</span>
              </div>
              <div class="toggle-switch" id="voice_wake_toggle" onclick="toggleVoiceWake()"></div>
            </div>
            <div class="setting-item">
              <div class="setting-label">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                  <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
                </svg>
                <span>è¯­éŸ³æ’­æ”¾</span>
              </div>
              <div class="toggle-switch active" id="tts_toggle" onclick="toggleTTS()"></div>
            </div>
          </div>
        </div>

        <!-- è¾“å…¥åŒºåŸŸ -->
        <div class="input-wrapper">
          <textarea 
            id="message_input" 
            placeholder="è¯·è¾“å…¥æ‚¨çš„æŒ‡ä»¤æˆ–é—®é¢˜..." 
            rows="1"
          ></textarea>
          
          <!-- è¯­éŸ³æŒ‰é’® -->
          <button class="voice-btn" id="voice_btn" onclick="toggleVoiceRecording()" title="ç‚¹å‡»å½•éŸ³">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
              <line x1="12" y1="19" x2="12" y2="23"/>
              <line x1="8" y1="23" x2="16" y2="23"/>
            </svg>
          </button>
          
          <button class="send-btn" onclick="sendMessage()" id="send_btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13"/>
              <polygon points="22,2 15,22 11,13 2,9 22,2"/>
            </svg>
          </button>
          
          <div class="audio-status" id="audio_status"></div>
        </div>
      </footer>
    </main>

    <!-- è§†è§‰ç³»ç»Ÿä¾§è¾¹é¢æ¿ -->
    <div class="vision-panel" id="vision_panel">
      <div class="vision-header">
        <div class="vision-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
          è§†è§‰ç³»ç»Ÿ
        </div>
        <button class="close-vision-btn" onclick="toggleVisionPanel()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>

      <div class="vision-body">
        <div class="camera-container">
          <div class="camera-view">
            <img id="live_camera" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='360' height='200' viewBox='0 0 360 200'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='14' fill='%23999' text-anchor='middle' dy='.3em'%3Eå®æ—¶æ‘„åƒå¤´ç”»é¢%3C/text%3E%3C/svg%3E" alt="å®æ—¶ç”»é¢" />
            <div class="camera-overlay">
              <span id="fps_counter">FPS: --</span>
            </div>
          </div>
          <div class="detection-view">
            <img id="detection_result" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='360' height='200' viewBox='0 0 360 200'%3E%3Crect width='100%25' height='100%25' fill='%23f8f9fa'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='14' fill='%23666' text-anchor='middle' dy='.3em'%3Eç›®æ ‡æ£€æµ‹ç»“æœ%3C/text%3E%3C/svg%3E" alt="æ£€æµ‹ç»“æœ" />
            <div class="detection-overlay">
              <span id="object_count">å¯¹è±¡: 0</span>
            </div>
          </div>
        </div>
        
        <div class="vision-controls">
          <button class="control-btn primary" onclick="runDetection()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
            æ£€æµ‹ç‰©ä½“
          </button>
          <button class="control-btn secondary" onclick="refreshCamera()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 3h6l2 3h10a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"/>
              <circle cx="12" cy="13" r="3"/>
            </svg>
            åˆ·æ–°
          </button>
        </div>

        <div class="objects-list" id="objects_list">
          <div class="empty-state">ç­‰å¾…æ£€æµ‹...</div>
        </div>
      </div>
    </div>

    <!-- è§†è§‰é¢æ¿åˆ‡æ¢æŒ‰é’® -->
    <button class="vision-toggle-btn" id="vision_toggle_btn" onclick="toggleVisionPanel()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
    </button>
  </div>

  <!-- é€šçŸ¥å®¹å™¨ -->
  <div id="notifications"></div>

  <script>
    // å…¨å±€å˜é‡
    let isRecording = false;
    let isVoiceWakeEnabled = false;
    let isTTSEnabled = true;
    let visionPanelOpen = false;
    let voiceWakeListener = null;

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      initializeApp();
      autoResizeTextarea();
      connectWebSocket();
      setupVoiceWake();
    });

    function initializeApp() {
      console.log('ğŸ¤– AIè§†è§‰æœºæ¢°è‡‚æ§åˆ¶ç³»ç»Ÿå¯åŠ¨ä¸­...');
      
      // æ¨¡æ‹ŸçŠ¶æ€æ›´æ–°
      setTimeout(() => {
        document.getElementById('system_status').textContent = 'ç³»ç»Ÿå°±ç»ª';
      }, 2000);
    }

    // åˆ‡æ¢è§†è§‰é¢æ¿
    function toggleVisionPanel() {
      const panel = document.getElementById('vision_panel');
      const toggleBtn = document.getElementById('vision_toggle_btn');
      const headerBtn = document.querySelector('.header-actions .icon-btn');
      
      visionPanelOpen = !visionPanelOpen;
      
      if (visionPanelOpen) {
        panel.classList.add('open');
        toggleBtn.classList.add('panel-open');
        headerBtn.classList.add('active');
      } else {
        panel.classList.remove('open');
        toggleBtn.classList.remove('panel-open');
        headerBtn.classList.remove('active');
      }
    }

    // åˆ‡æ¢AIæ€è€ƒè¿‡ç¨‹
    function toggleThinking(header) {
      const content = header.nextElementSibling;
      const toggle = header.querySelector('.thinking-toggle');
      
      if (content.classList.contains('expanded')) {
        content.classList.remove('expanded');
        toggle.classList.remove('expanded');
      } else {
        content.classList.add('expanded');
        toggle.classList.add('expanded');
      }
    }

    // åˆ‡æ¢è¾“å…¥æ¨¡å¼
    function switchInputMode(mode) {
      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      document.querySelectorAll('.mode-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
      
      const voiceBtn = document.getElementById('voice_btn');
      const messageInput = document.getElementById('message_input');
      
      if (mode === 'voice') {
        voiceBtn.style.display = 'flex';
        messageInput.placeholder = 'ç‚¹å‡»éº¦å…‹é£å½•éŸ³æˆ–å¼€å¯è¯­éŸ³å”¤é†’...';
      } else {
        voiceBtn.style.display = 'none';
        messageInput.placeholder = 'è¯·è¾“å…¥æ‚¨çš„æŒ‡ä»¤æˆ–é—®é¢˜...';
      }
    }

    // è¯­éŸ³å”¤é†’ç›¸å…³åŠŸèƒ½
    function setupVoiceWake() {
      // æ¨¡æ‹Ÿè¯­éŸ³å”¤é†’æ£€æµ‹
      if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        console.log('ğŸ¤ è¯­éŸ³è¯†åˆ«APIå¯ç”¨');
      } else {
        console.log('âŒ æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«');
      }
    }

    function toggleVoiceWake() {
      const toggle = document.getElementById('voice_wake_toggle');
      const indicator = document.getElementById('voice_wake_indicator');
      
      isVoiceWakeEnabled = !isVoiceWakeEnabled;
      
      if (isVoiceWakeEnabled) {
        toggle.classList.add('active');
        indicator.classList.add('active');
        startVoiceWakeListening();
        showNotification('è¯­éŸ³å”¤é†’å·²å¼€å¯', 'success');
      } else {
        toggle.classList.remove('active');
        indicator.classList.remove('active');
        stopVoiceWakeListening();
        showNotification('è¯­éŸ³å”¤é†’å·²å…³é—­', 'info');
      }
    }

    function startVoiceWakeListening() {
      // è¿™é‡Œåº”è¯¥å®ç°å®é™…çš„è¯­éŸ³å”¤é†’ç›‘å¬é€»è¾‘
      console.log('ğŸ¤ å¼€å§‹è¯­éŸ³å”¤é†’ç›‘å¬...');
      
      // æ¨¡æ‹Ÿè¯­éŸ³å”¤é†’è§¦å‘
      setTimeout(() => {
        if (isVoiceWakeEnabled) {
          simulateVoiceWakeActivation();
        }
      }, 5000);
    }

    function stopVoiceWakeListening() {
      console.log('ğŸ›‘ åœæ­¢è¯­éŸ³å”¤é†’ç›‘å¬');
      if (voiceWakeListener) {
        // åœæ­¢ç›‘å¬
      }
    }

    function simulateVoiceWakeActivation() {
      showNotification('æ£€æµ‹åˆ°å”¤é†’è¯ï¼', 'success');
      startVoiceRecording();
    }

    function toggleTTS() {
      const toggle = document.getElementById('tts_toggle');
      isTTSEnabled = !isTTSEnabled;
      
      if (isTTSEnabled) {
        toggle.classList.add('active');
        showNotification('è¯­éŸ³æ’­æ”¾å·²å¼€å¯', 'success');
      } else {
        toggle.classList.remove('active');
        showNotification('è¯­éŸ³æ’­æ”¾å·²å…³é—­', 'info');
      }
    }

    // è¯­éŸ³å½•éŸ³åŠŸèƒ½
    function toggleVoiceRecording() {
      if (isRecording) {
        stopVoiceRecording();
      } else {
        startVoiceRecording();
      }
    }

    function startVoiceRecording() {
      isRecording = true;
      const voiceBtn = document.getElementById('voice_btn');
      const audioStatus = document.getElementById('audio_status');
      
      voiceBtn.classList.add('recording');
      voiceBtn.innerHTML = `
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <rect x="6" y="6" width="12" height="12" rx="2"/>
        </svg>
      `;
      voiceBtn.title = 'ç‚¹å‡»åœæ­¢å½•éŸ³';
      
      audioStatus.textContent = 'æ­£åœ¨å½•éŸ³...';
      audioStatus.classList.add('visible');
      
      // æ¨¡æ‹Ÿå½•éŸ³è¿‡ç¨‹ï¼ˆå®é™…åº”è¯¥è°ƒç”¨Web Speech APIï¼‰
      setTimeout(() => {
        if (isRecording) {
          stopVoiceRecording();
        }
      }, 5000); // 5ç§’åè‡ªåŠ¨åœæ­¢
    }

    function stopVoiceRecording() {
      isRecording = false;
      const voiceBtn = document.getElementById('voice_btn');
      const audioStatus = document.getElementById('audio_status');
      const messageInput = document.getElementById('message_input');
      
      voiceBtn.classList.remove('recording');
      voiceBtn.classList.add('listening');
      voiceBtn.innerHTML = `
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
          <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
          <line x1="12" y1="19" x2="12" y2="23"/>
          <line x1="8" y1="23" x2="16" y2="23"/>
        </svg>
      `;
      voiceBtn.title = 'ç‚¹å‡»å½•éŸ³';
      
      audioStatus.textContent = 'æ­£åœ¨è¯†åˆ«...';
      
      // æ¨¡æ‹Ÿè¯­éŸ³è¯†åˆ«
      setTimeout(() => {
        const recognizedText = 'è¯·å¸®æˆ‘æ£€æµ‹æ¡Œé¢ä¸Šçš„ç‰©ä½“';
        messageInput.value = recognizedText;
        
        audioStatus.textContent = 'è¯†åˆ«å®Œæˆ';
        voiceBtn.classList.remove('listening');
        
        setTimeout(() => {
          audioStatus.classList.remove('visible');
        }, 2000);
        
        // è‡ªåŠ¨å‘é€æ¶ˆæ¯
        setTimeout(() => {
          sendMessage();
        }, 1000);
      }, 2000);
    }

    // å‘é€æ¶ˆæ¯
    function sendMessage() {
      const input = document.getElementById('message_input');
      const message = input.value.trim();
      
      if (!message) return;

      // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
      addMessage('user', message);
      
      // æ¸…ç©ºè¾“å…¥
      input.value = '';
      
      // è‡ªåŠ¨è°ƒæ•´é«˜åº¦
      input.style.height = 'auto';
      
      // æ¨¡æ‹ŸAIå“åº”
      setTimeout(() => {
        addAIResponse(message);
      }, 1000);
    }

    // æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©åŒºåŸŸ
    function addMessage(type, content) {
      const messagesContainer = document.getElementById('chat_messages');
      
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${type}`;
      
      const messageContent = document.createElement('div');
      messageContent.className = 'message-content';
      messageContent.textContent = content;
      
      messageDiv.appendChild(messageContent);
      messagesContainer.appendChild(messageDiv);
      
      // æ»šåŠ¨åˆ°åº•éƒ¨
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // æ·»åŠ AIå“åº”ï¼ˆåŒ…å«æ€è€ƒè¿‡ç¨‹ï¼‰
    function addAIResponse(userMessage) {
      const messagesContainer = document.getElementById('chat_messages');
      
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message assistant';
      
      const messageContent = document.createElement('div');
      messageContent.className = 'message-content';
      
      // ç”Ÿæˆå“åº”å†…å®¹
      const response = generateAIResponse(userMessage);
      messageContent.innerHTML = response;
      
      messageDiv.appendChild(messageContent);
      messagesContainer.appendChild(messageDiv);
      
      // æ»šåŠ¨åˆ°åº•éƒ¨
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
      
      // å¦‚æœå¯ç”¨äº†TTSï¼Œæ’­æ”¾è¯­éŸ³
      if (isTTSEnabled) {
        playTTS(generateMainResponse(userMessage));
      }
    }

    // ç”ŸæˆAIå“åº”ï¼ˆåŒ…å«æ€è€ƒè¿‡ç¨‹ï¼‰
    function generateAIResponse(userMessage) {
      const thinking = generateThinkingProcess(userMessage);
      const response = generateMainResponse(userMessage);
      
      return `
        ${response}
        
        <div class="thinking-section">
          <div class="thinking-header" onclick="toggleThinking(this)">
            <div class="thinking-title">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4"/>
                <path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 9 4.03 9 9z"/>
              </svg>
              <span>AIæ€è€ƒè¿‡ç¨‹</span>
            </div>
            <svg class="thinking-toggle" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="m6 9 6 6 6-6"/>
            </svg>
          </div>
          <div class="thinking-content">
            <div class="thinking-text">${thinking}</div>
          </div>
        </div>
      `;
    }

    // ç”Ÿæˆæ€è€ƒè¿‡ç¨‹
    function generateThinkingProcess(userMessage) {
      if (userMessage.includes('æŠ“å–') || userMessage.includes('æ‹¿')) {
        return `ç”¨æˆ·è¦æ±‚æ‰§è¡ŒæŠ“å–åŠ¨ä½œã€‚æˆ‘éœ€è¦ï¼š

1. å¯åŠ¨è§†è§‰ç³»ç»Ÿç¡®è®¤ç›®æ ‡ç‰©ä½“
2. åˆ†æç‰©ä½“çš„ä½ç½®å’Œç‰¹å¾
3. è®¡ç®—æœ€ä¼˜æŠ“å–è·¯å¾„
4. æ£€æŸ¥æœºæ¢°è‡‚çŠ¶æ€å’Œå¯è¾¾æ€§
5. è§„åˆ’å¤¹çˆªå¼€åˆè§’åº¦
6. æ‰§è¡ŒæŠ“å–åºåˆ—

è®©æˆ‘å…ˆé€šè¿‡è§†è§‰ç³»ç»Ÿåˆ†æå½“å‰åœºæ™¯...`;
      } else if (userMessage.includes('æ£€æµ‹') || userMessage.includes('çœ‹')) {
        return `ç”¨æˆ·è¦æ±‚è¿›è¡Œè§†è§‰æ£€æµ‹ã€‚æˆ‘çš„åˆ†ææµç¨‹ï¼š

1. æ¿€æ´»æ‘„åƒå¤´è·å–å®æ—¶ç”»é¢
2. è¿è¡Œç‰©ä½“æ£€æµ‹ç®—æ³•
3. è¯†åˆ«å’Œåˆ†ç±»åœºæ™¯ä¸­çš„ç‰©ä½“
4. åˆ†æç‰©ä½“çš„ä½ç½®åæ ‡å’Œç‰¹å¾
5. ç”Ÿæˆæ£€æµ‹ç»“æœæŠ¥å‘Š

æ­£åœ¨å¤„ç†è§†è§‰æ•°æ®...`;
      } else if (userMessage.includes('åœæ­¢') || userMessage.includes('ç´§æ€¥')) {
        return `æ£€æµ‹åˆ°ç´§æ€¥åœæ­¢æŒ‡ä»¤ï¼

1. ç«‹å³åœæ­¢æ‰€æœ‰æœºæ¢°è‡‚è¿åŠ¨
2. é”å®šå½“å‰ä½ç½®
3. åˆ‡æ–­åŠ¨åŠ›è¾“å‡º
4. ç­‰å¾…è¿›ä¸€æ­¥æŒ‡ä»¤

å®‰å…¨æ˜¯ç¬¬ä¸€ä¼˜å…ˆçº§ï¼Œæ­£åœ¨æ‰§è¡Œç´§æ€¥åœæ­¢...`;
      } else {
        return `åˆ†æç”¨æˆ·æ„å›¾ï¼š"${userMessage}"

è¿™æ˜¯ä¸€ä¸ªä¸€èˆ¬æ€§è¯¢é—®ï¼Œæˆ‘éœ€è¦ï¼š
1. ç†è§£ç”¨æˆ·çš„å…·ä½“éœ€æ±‚
2. ç¡®å®šæ˜¯å¦éœ€è¦å¯ç”¨ç‰¹å®šåŠŸèƒ½
3. æä¾›ç›¸åº”çš„å¸®åŠ©å’Œå»ºè®®
4. å¦‚æœæ¶‰åŠæœºæ¢°è‡‚æ“ä½œï¼Œå‡†å¤‡ç›¸å…³æµç¨‹

æ ¹æ®å½“å‰ä¸Šä¸‹æ–‡ç”Ÿæˆå›åº”...`;
      }
    }

    // ç”Ÿæˆä¸»è¦å“åº”
    function generateMainResponse(userMessage) {
      if (userMessage.includes('æŠ“å–') || userMessage.includes('æ‹¿')) {
        return 'æˆ‘ç†è§£æ‚¨è¦æ‰§è¡ŒæŠ“å–æ“ä½œã€‚æ­£åœ¨å¯åŠ¨è§†è§‰ç³»ç»Ÿè¿›è¡Œåœºæ™¯åˆ†æï¼Œè¯·ç¨å€™...';
      } else if (userMessage.includes('æ£€æµ‹') || userMessage.includes('çœ‹')) {
        return 'æ­£åœ¨å¯åŠ¨ç‰©ä½“æ£€æµ‹åŠŸèƒ½ï¼Œåˆ†ææ‘„åƒå¤´ç”»é¢ä¸­çš„ç‰©ä½“...';
      } else if (userMessage.includes('çŠ¶æ€') || userMessage.includes('æƒ…å†µ')) {
        return 'å½“å‰ç³»ç»ŸçŠ¶æ€è‰¯å¥½ï¼Œæ‰€æœ‰æœåŠ¡è¿è¡Œæ­£å¸¸ã€‚å¦‚éœ€æ£€æŸ¥ç‰¹å®šç»„ä»¶çŠ¶æ€ï¼Œè¯·å‘Šè¯‰æˆ‘å…·ä½“éœ€æ±‚ã€‚';
      } else if (userMessage.includes('åœæ­¢') || userMessage.includes('ç´§æ€¥')) {
        return 'âš ï¸ ç´§æ€¥åœæ­¢æŒ‡ä»¤å·²æ‰§è¡Œï¼æœºæ¢°è‡‚å·²åœæ­¢æ‰€æœ‰è¿åŠ¨å¹¶é”å®šä½ç½®ã€‚';
      } else if (userMessage.includes('è¿”å›') || userMessage.includes('åŸç‚¹')) {
        return 'æ­£åœ¨è§„åˆ’è¿”å›åŸç‚¹è·¯å¾„ï¼Œæœºæ¢°è‡‚å°†å®‰å…¨ç§»åŠ¨åˆ°åˆå§‹ä½ç½®...';
      } else {
        return 'æˆ‘æ˜¯æ‚¨çš„AIè§†è§‰æœºæ¢°è‡‚åŠ©æ‰‹ã€‚æˆ‘å¯ä»¥å¸®æ‚¨æ§åˆ¶æœºæ¢°è‡‚ã€åˆ†æè§†è§‰ç”»é¢ã€æ£€æµ‹ç‰©ä½“ç­‰ã€‚è¯·å‘Šè¯‰æˆ‘æ‚¨éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿ';
      }
    }

    // TTSæ’­æ”¾
    function playTTS(text) {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'zh-CN';
        utterance.rate = 0.9;
        utterance.pitch = 1.0;
        speechSynthesis.speak(utterance);
      }
    }

    // è§†è§‰åŠŸèƒ½
    function runDetection() {
      showNotification('æ­£åœ¨è¿è¡Œç‰©ä½“æ£€æµ‹...', 'info');
      document.getElementById('object_count').textContent = 'å¯¹è±¡: 3';
      
      setTimeout(() => {
        document.getElementById('objects_list').innerHTML = `
          <div style="margin-bottom: 10px; padding: 8px; background: rgba(0,0,0,0.05); border-radius: 6px;">
            ğŸ“± æ‰‹æœº (ç½®ä¿¡åº¦: 95%)
          </div>
          <div style="margin-bottom: 10px; padding: 8px; background: rgba(0,0,0,0.05); border-radius: 6px;">
            ğŸ è‹¹æœ (ç½®ä¿¡åº¦: 87%)
          </div>
          <div style="margin-bottom: 10px; padding: 8px; background: rgba(0,0,0,0.05); border-radius: 6px;">
            ğŸ“š ä¹¦æœ¬ (ç½®ä¿¡åº¦: 92%)
          </div>
        `;
      }, 2000);
    }

    function refreshCamera() {
      showNotification('åˆ·æ–°æ‘„åƒå¤´...', 'info');
      document.getElementById('fps_counter').textContent = 'FPS: 30';
    }

    // è‡ªåŠ¨è°ƒæ•´æ–‡æœ¬åŸŸé«˜åº¦
    function autoResizeTextarea() {
      const textarea = document.getElementById('message_input');
      textarea.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = Math.min(this.scrollHeight, 120) + 'px';
      });
      
      textarea.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });
    }

    // WebSocketè¿æ¥ï¼ˆæ¨¡æ‹Ÿï¼‰
    function connectWebSocket() {
      console.log('ğŸ”Œ è¿æ¥åˆ°åç«¯æœåŠ¡...');
      // è¿™é‡Œåº”è¯¥æ˜¯å®é™…çš„WebSocketè¿æ¥é€»è¾‘
    }

    // é€šçŸ¥åŠŸèƒ½
    function showNotification(message, type = 'info') {
      const container = document.getElementById('notifications');
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      
      container.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }

    // æ‰§è¡Œç¡®è®¤
    function confirmExecution() {
      showNotification('æ­£åœ¨æ‰§è¡ŒåŠ¨ä½œ...', 'success');
      document.getElementById('execution_panel').style.display = 'none';
    }

    function cancelExecution() {
      showNotification('å·²å–æ¶ˆæ‰§è¡Œ', 'warning');
      document.getElementById('execution_panel').style.display = 'none';
    }
  </script>
</body>
</html>